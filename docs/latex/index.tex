\chapter{YAML Toolkit}
\hypertarget{index}{}\label{index}\index{YAML Toolkit@{YAML Toolkit}}
\label{index_md_README}%
\Hypertarget{index_md_README}%
 Provides robust YAML validation and file handling services for Drupal applications.\hypertarget{index_autotoc_md1}{}\doxysection{\texorpdfstring{Table of contents}{Table of contents}}\label{index_autotoc_md1}

\begin{DoxyItemize}
\item Requirements
\item Installation
\item Configuration
\item Usage
\item Services
\item API
\item Troubleshooting
\item Maintainers
\end{DoxyItemize}\hypertarget{index_autotoc_md2}{}\doxysection{\texorpdfstring{Requirements}{Requirements}}\label{index_autotoc_md2}
This module requires the following modules/libraries\+:


\begin{DoxyItemize}
\item Drupal\+: \texorpdfstring{$^\wedge$}{\string^}9.0 \texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|} \texorpdfstring{$^\wedge$}{\string^}10.0 \texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|} \texorpdfstring{$^\wedge$}{\string^}11.0
\item PHP\+: \texorpdfstring{$^\wedge$}{\string^}8.1
\item Symfony YAML Component\+: \texorpdfstring{$^\wedge$}{\string^}6.0 \texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|} \texorpdfstring{$^\wedge$}{\string^}7.0
\end{DoxyItemize}\hypertarget{index_autotoc_md3}{}\doxysection{\texorpdfstring{Installation}{Installation}}\label{index_autotoc_md3}
Install as you would normally install a contributed Drupal module. For further information, see \href{https://www.drupal.org/docs/extending-drupal/installing-drupal-modules}{\texttt{ Installing Drupal Modules}}.\hypertarget{index_autotoc_md4}{}\doxysubsection{\texorpdfstring{Via Composer (recommended)}{Via Composer (recommended)}}\label{index_autotoc_md4}

\begin{DoxyCode}{0}
\DoxyCodeLine{composer\ require\ drupal/yaml\_toolkit}

\end{DoxyCode}
\hypertarget{index_autotoc_md5}{}\doxysubsection{\texorpdfstring{Manual installation}{Manual installation}}\label{index_autotoc_md5}

\begin{DoxyEnumerate}
\item Download the latest version from the \href{https://www.drupal.org/project/yaml_toolkit}{\texttt{ project page}}.
\item Extract the archive to your {\ttfamily modules/contrib} directory.
\item Enable the module at {\ttfamily admin/modules}.
\end{DoxyEnumerate}\hypertarget{index_autotoc_md6}{}\doxysection{\texorpdfstring{Configuration}{Configuration}}\label{index_autotoc_md6}
No configuration is required. The module provides services that can be injected into your custom code.\hypertarget{index_autotoc_md7}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{index_autotoc_md7}
\hypertarget{index_autotoc_md8}{}\doxysubsection{\texorpdfstring{Basic YAML validation}{Basic YAML validation}}\label{index_autotoc_md8}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ the\ validator\ service}}
\DoxyCodeLine{\$validator\ =\ \(\backslash\)Drupal::service(\textcolor{stringliteral}{'yaml\_toolkit.validator'});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Validate\ a\ YAML\ string}}
\DoxyCodeLine{\$yamlString\ =\ \textcolor{stringliteral}{"{}}}
\DoxyCodeLine{\textcolor{stringliteral}{key1:\ value1}}
\DoxyCodeLine{\textcolor{stringliteral}{key2:}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ -\/\ item1}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ -\/\ item2}}
\DoxyCodeLine{\textcolor{stringliteral}{"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{\$isValid\ =\ \$validator-\/>checkYaml(\$yamlString);}
\DoxyCodeLine{\$result\ =\ \$validator-\/>getResult();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (\$isValid)\ \{}
\DoxyCodeLine{\ \ \$parsedData\ =\ \$result[\textcolor{stringliteral}{'parsed'}];}
\DoxyCodeLine{\ \ \$yamlOutput\ =\ \$result[\textcolor{stringliteral}{'yaml'}];}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{index_autotoc_md9}{}\doxysubsection{\texorpdfstring{File operations}{File operations}}\label{index_autotoc_md9}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ the\ storage\ service}}
\DoxyCodeLine{\$storage\ =\ \(\backslash\)Drupal::service(\textcolor{stringliteral}{'yaml\_toolkit.storage'});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Load\ YAML\ from\ file}}
\DoxyCodeLine{\$data\ =\ \$storage-\/>load(\textcolor{stringliteral}{'path/to/config.yml'},\ \textcolor{stringliteral}{'my\_module'},\ TRUE);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (\$data\ !==\ FALSE)\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ Process\ the\ loaded\ data}}
\DoxyCodeLine{\ \ \$zones\ =\ \$data[\textcolor{stringliteral}{'zones'}]\ ??\ [];}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Save\ YAML\ to\ file}}
\DoxyCodeLine{\$configData\ =\ [}
\DoxyCodeLine{\ \ \textcolor{stringliteral}{'zones'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'content'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'plugin'}\ =>\ \textcolor{stringliteral}{'title\_template'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'tag'}\ =>\ \textcolor{stringliteral}{'h2'},}
\DoxyCodeLine{\ \ \ \ \ \ ],}
\DoxyCodeLine{\ \ \ \ ],}
\DoxyCodeLine{\ \ ],}
\DoxyCodeLine{];}
\DoxyCodeLine{}
\DoxyCodeLine{\$success\ =\ \$storage-\/>save(\textcolor{stringliteral}{'path/to/config.yml'},\ \$configData,\ \textcolor{stringliteral}{'my\_module'},\ TRUE);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (!\$success)\ \{}
\DoxyCodeLine{\ \ \$error\ =\ \$storage-\/>getInfo();}
\DoxyCodeLine{\ \ \(\backslash\)Drupal::logger(\textcolor{stringliteral}{'my\_module'})-\/>error(\$error[\textcolor{stringliteral}{'error\_text'}]);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{index_autotoc_md10}{}\doxysection{\texorpdfstring{Services}{Services}}\label{index_autotoc_md10}
\hypertarget{index_autotoc_md11}{}\doxysubsection{\texorpdfstring{yaml\+\_\+toolkit.\+validator}{yaml\_toolkit.validator}}\label{index_autotoc_md11}
Validates YAML content in multiple formats\+:


\begin{DoxyItemize}
\item Raw YAML strings
\item PHP arrays (will be dumped and re-\/parsed)
\item Arrays of YAML strings
\end{DoxyItemize}

{\bfseries{Service ID}}\+: {\ttfamily yaml\+\_\+toolkit.\+validator} ~\newline
 {\bfseries{Interface}}\+: {\ttfamily Drupal\textbackslash{}yaml\+\_\+toolkit\textbackslash{}Contract\textbackslash{}Service\textbackslash{}Yaml\+Validator\+Interface} ~\newline
 {\bfseries{Class}}\+: {\ttfamily Drupal\textbackslash{}yaml\+\_\+toolkit\textbackslash{}Service\textbackslash{}Yaml\+Validator}\hypertarget{index_autotoc_md12}{}\doxysubsubsection{\texorpdfstring{Methods}{Methods}}\label{index_autotoc_md12}

\begin{DoxyItemize}
\item {\ttfamily check\+Yaml(\$data)}\+: Validates YAML content
\item {\ttfamily get\+Result()}\+: Returns detailed validation information
\end{DoxyItemize}\hypertarget{index_autotoc_md13}{}\doxysubsection{\texorpdfstring{yaml\+\_\+toolkit.\+storage}{yaml\_toolkit.storage}}\label{index_autotoc_md13}
Handles YAML file operations with validation and error handling.

{\bfseries{Service ID}}\+: {\ttfamily yaml\+\_\+toolkit.\+storage} ~\newline
 {\bfseries{Interface}}\+: {\ttfamily Drupal\textbackslash{}yaml\+\_\+toolkit\textbackslash{}Contract\textbackslash{}Service\textbackslash{}Yaml\+Storage\+Interface} ~\newline
 {\bfseries{Class}}\+: {\ttfamily Drupal\textbackslash{}yaml\+\_\+toolkit\textbackslash{}Service\textbackslash{}Yaml\+Storage}\hypertarget{index_autotoc_md14}{}\doxysubsubsection{\texorpdfstring{Methods}{Methods}}\label{index_autotoc_md14}

\begin{DoxyItemize}
\item {\ttfamily load(\$file\+Path, \$logger\+Channel, \$verbose)}\+: Load and validate YAML file
\item {\ttfamily save(\$file\+Path, \$data, \$logger\+Channel, \$verbose)}\+: Save data as YAML file
\item {\ttfamily get\+Info()}\+: Get detailed information about the last operation
\end{DoxyItemize}\hypertarget{index_autotoc_md15}{}\doxysection{\texorpdfstring{API}{API}}\label{index_autotoc_md15}
\hypertarget{index_autotoc_md16}{}\doxysubsection{\texorpdfstring{Yaml\+Validator\+Interface}{YamlValidatorInterface}}\label{index_autotoc_md16}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{interface\ }YamlValidatorInterface\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_SUCCESS\ =\ 0;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_VALIDATION\_FAILED\ =\ 10;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_SCALAR\_VALUE\ =\ 11;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_PARSE\_FAILED\ =\ 12;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_UNSUPPORTED\_TYPE\ =\ 13;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_NO\_DATA\ =\ 14;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ checkYaml(\$content):\ bool;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ getResult():\ array;}
\DoxyCodeLine{}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{index_autotoc_md17}{}\doxysubsection{\texorpdfstring{Yaml\+Storage\+Interface}{YamlStorageInterface}}\label{index_autotoc_md17}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{interface\ }YamlStorageInterface\ \{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_SUCCESS\ =\ 0;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_EMPTY\_PATH\ =\ 1;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_FILE\_NOT\_FOUND\ =\ 2;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_FILE\_NOT\_READABLE\ =\ 3;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_FILE\_NOT\_WRITABLE\ =\ 4;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_READ\_FAILED\ =\ 5;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_EMPTY\_FILE\ =\ 6;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_NO\_YAML\_DATA\ =\ 7;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_WRITE\_FAILED\ =\ 8;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ ERROR\_NO\_DATA\ =\ 9;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ save(\textcolor{keywordtype}{string}\ \$filePath,\ array\ \$data,\ \textcolor{keywordtype}{string}\ \$loggerChannel\ =\ \textcolor{stringliteral}{'default'},\ \textcolor{keywordtype}{bool}\ \$verbose\ =\ FALSE);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ load(\textcolor{keywordtype}{string}\ \$filePath,\ \textcolor{keywordtype}{string}\ \$loggerChannel\ =\ \textcolor{stringliteral}{'default'},\ \textcolor{keywordtype}{bool}\ \$verbose\ =\ FALSE);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ getInfo():\ array;}
\DoxyCodeLine{}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{index_autotoc_md18}{}\doxysubsection{\texorpdfstring{Error codes}{Error codes}}\label{index_autotoc_md18}
The validator uses the following error codes\+:


\begin{DoxyItemize}
\item {\ttfamily 0}\+: Success
\item {\ttfamily 10}\+: YAML validation failed
\item {\ttfamily 11}\+: Scalar value (not supported)
\item {\ttfamily 12}\+: Conversion to YAML failed
\item {\ttfamily 13}\+: Unsupported input type
\item {\ttfamily 14}\+: No data provided
\end{DoxyItemize}

The storage service uses additional error codes\+:


\begin{DoxyItemize}
\item {\ttfamily 1}\+: Empty file path
\item {\ttfamily 2}\+: File not found
\item {\ttfamily 3}\+: File not readable
\item {\ttfamily 4}\+: File not writable
\item {\ttfamily 5}\+: File read failed
\item {\ttfamily 6}\+: Empty file
\item {\ttfamily 7}\+: No YAML data
\item {\ttfamily 8}\+: File write failed
\item {\ttfamily 9}\+: YAML dump failed
\end{DoxyItemize}\hypertarget{index_autotoc_md19}{}\doxysection{\texorpdfstring{Troubleshooting}{Troubleshooting}}\label{index_autotoc_md19}
\hypertarget{index_autotoc_md20}{}\doxysubsection{\texorpdfstring{Common issues}{Common issues}}\label{index_autotoc_md20}
\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}"{}\+File not found"{} errors\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}
\begin{DoxyItemize}
\item Check file permissions
\item Verify the file path is correct
\item Ensure the file exists before attempting to load
\end{DoxyItemize}

\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}"{}\+YAML validation failed"{}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}
\begin{DoxyItemize}
\item Check YAML syntax using an online validator
\item Ensure proper indentation (2 spaces per level)
\item Verify quotes and special characters are properly escaped
\end{DoxyItemize}

\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}"{}\+File not writable"{} errors\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}
\begin{DoxyItemize}
\item Check directory and file permissions
\item Ensure the web server can write to the target directory
\item Verify disk space is available
\end{DoxyItemize}\hypertarget{index_autotoc_md21}{}\doxysubsection{\texorpdfstring{Debugging}{Debugging}}\label{index_autotoc_md21}
Enable verbose mode to display errors in the Drupal UI\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$storage\ =\ \(\backslash\)Drupal::service(\textcolor{stringliteral}{'yaml\_toolkit.storage'});}
\DoxyCodeLine{\$result\ =\ \$storage-\/>load(\textcolor{stringliteral}{'config.yml'},\ \textcolor{stringliteral}{'my\_module'},\ TRUE);\ \textcolor{comment}{//\ verbose\ =\ TRUE}}

\end{DoxyCode}


Check the logs for detailed error information\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{drush\ watchdog-\/show\ -\/-\/type=my\_module}

\end{DoxyCode}
\hypertarget{index_autotoc_md22}{}\doxysection{\texorpdfstring{Maintainers}{Maintainers}}\label{index_autotoc_md22}

\begin{DoxyItemize}
\item \href{https://www.drupal.org/u/carlos-espino}{\texttt{ Carlos Espino Angulo}} 
\end{DoxyItemize}