<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="YamlStorage_8php" kind="file" language="PHP">
    <compoundname>YamlStorage.php</compoundname>
    <innerclass refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage" prot="public">Drupal::yaml_toolkit::Service::YamlStorage</innerclass>
    <innernamespace refid="namespaceDrupal_1_1yaml__toolkit_1_1Service">Drupal::yaml_toolkit::Service</innernamespace>
    <innernamespace refid="namespaceDrupal_1_1Core_1_1File_1_1FileSystemInterface">Drupal::Core::File::FileSystemInterface</innernamespace>
    <innernamespace refid="namespaceDrupal_1_1Core_1_1Logger_1_1LoggerChannelFactoryInterface">Drupal::Core::Logger::LoggerChannelFactoryInterface</innernamespace>
    <innernamespace refid="namespaceDrupal_1_1Core_1_1Messenger_1_1MessengerInterface">Drupal::Core::Messenger::MessengerInterface</innernamespace>
    <innernamespace refid="namespaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlStorageInterface">Drupal::yaml_toolkit::Contract::Service::YamlStorageInterface</innernamespace>
    <innernamespace refid="namespaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlValidatorInterface">Drupal::yaml_toolkit::Contract::Service::YamlValidatorInterface</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">Drupal\yaml_toolkit\Service;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal">use<sp/>Drupal\Core\File\FileSystemInterface;</highlight></codeline>
<codeline lineno="6"><highlight class="normal">use<sp/>Drupal\Core\Logger\LoggerChannelFactoryInterface;</highlight></codeline>
<codeline lineno="7"><highlight class="normal">use<sp/>Drupal\Core\Messenger\MessengerInterface;</highlight></codeline>
<codeline lineno="8"><highlight class="normal">use<sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlStorageInterface" kindref="compound">Drupal\yaml_toolkit\Contract\Service\YamlStorageInterface</ref>;</highlight></codeline>
<codeline lineno="9"><highlight class="normal">use<sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlValidatorInterface" kindref="compound">Drupal\yaml_toolkit\Contract\Service\YamlValidatorInterface</ref>;</highlight></codeline>
<codeline lineno="10"><highlight class="normal">use<sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Helper_1_1StreamWrapperManagerHelperInterface" kindref="compound">Drupal\yaml_toolkit\Contract\Helper\StreamWrapperManagerHelperInterface</ref>;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage" kindref="compound">YamlStorage</ref><sp/></highlight><highlight class="keyword">implements</highlight><highlight class="normal"><sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlStorageInterface" kindref="compound">YamlStorageInterface</ref><sp/>{</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_SUCCESS<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_EMPTY_PATH<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_FILE_NOT_FOUND<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_FILE_NOT_READABLE<sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_FILE_NOT_WRITABLE<sp/>=<sp/>4;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_READ_FAILED<sp/>=<sp/>5;</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_EMPTY_FILE<sp/>=<sp/>6;</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_NO_YAML_DATA<sp/>=<sp/>7;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_WRITE_FAILED<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>ERROR_NO_DATA<sp/>=<sp/>9;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>FileSystemInterface<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a2c46a4aa6beab79d35424cbc4253afcf" kindref="member">$fileSystem</ref>;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>LoggerChannelFactoryInterface<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1acf7fde21049dfad18a48c202fb4b98eb" kindref="member">$loggerFactory</ref>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>MessengerInterface<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a433532695b83ddd8110cabfca39bdad2" kindref="member">$messenger</ref>;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlValidatorInterface" kindref="compound">YamlValidatorInterface</ref><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1afa0a9d2b0c3e06a1fe3ba638bf98e89b" kindref="member">$yamlValidator</ref>;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Helper_1_1StreamWrapperManagerHelperInterface" kindref="compound">StreamWrapperManagerHelperInterface</ref><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af16a267f8d52987314ece2442a791685" kindref="member">$streamWrapperManagerHelper</ref>;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a4da8b6612f8a9b52a532a96edca72dcb" kindref="member">$filename</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>array<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a0d27b38a9217e159354ef10d025996af" kindref="member">$info</ref><sp/>=<sp/>[];</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a4068c88d083b859d1c32585126ae516f" kindref="member">__construct</ref>(</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>FileSystemInterface<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a2c46a4aa6beab79d35424cbc4253afcf" kindref="member">$fileSystem</ref>,</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>LoggerChannelFactoryInterface<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1acf7fde21049dfad18a48c202fb4b98eb" kindref="member">$loggerFactory</ref>,</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/>MessengerInterface<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a433532695b83ddd8110cabfca39bdad2" kindref="member">$messenger</ref>,</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Service_1_1YamlValidatorInterface" kindref="compound">YamlValidatorInterface</ref><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1afa0a9d2b0c3e06a1fe3ba638bf98e89b" kindref="member">$yamlValidator</ref>,</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="interfaceDrupal_1_1yaml__toolkit_1_1Contract_1_1Helper_1_1StreamWrapperManagerHelperInterface" kindref="compound">StreamWrapperManagerHelperInterface</ref><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af16a267f8d52987314ece2442a791685" kindref="member">$streamWrapperManagerHelper</ref>,</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;fileSystem<sp/>=<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a2c46a4aa6beab79d35424cbc4253afcf" kindref="member">$fileSystem</ref>;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;loggerFactory<sp/>=<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1acf7fde21049dfad18a48c202fb4b98eb" kindref="member">$loggerFactory</ref>;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;messenger<sp/>=<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a433532695b83ddd8110cabfca39bdad2" kindref="member">$messenger</ref>;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;yamlValidator<sp/>=<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1afa0a9d2b0c3e06a1fe3ba638bf98e89b" kindref="member">$yamlValidator</ref>;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;streamWrapperManagerHelper<sp/>=<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af16a267f8d52987314ece2442a791685" kindref="member">$streamWrapperManagerHelper</ref>;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a70a5e23d0c5acff2ac689af1b0498932" kindref="member">getInfo</ref>():<sp/>array<sp/>{</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a0d27b38a9217e159354ef10d025996af" kindref="member">$this-&gt;info</ref>;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a3bbc6028cc81f30444e81ab0d6446cad" kindref="member">load</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$filePath,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$loggerChannel<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;default&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>$verbose<sp/>=<sp/>FALSE):<sp/>array|</highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aabdb8b88439439884ba9fec3c62b7611" kindref="member">resetState</ref>($loggerChannel,<sp/>$verbose,<sp/></highlight><highlight class="stringliteral">&apos;load&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty($filePath))<sp/>{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_EMPTY_PATH,<sp/></highlight><highlight class="stringliteral">&apos;Empty<sp/>file<sp/>path<sp/>provided&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref><sp/>=<sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a1763907a5d6908ffebea6188bb5cf7a7" kindref="member">prepareFilePath</ref>($filePath);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af175e2483264e2e3b3419118a2e4c714" kindref="member">checkFileExists</ref>($absolutePath)<sp/>||<sp/>!$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a19cb354dde361968f6e655d5403ac5bf" kindref="member">checkFileReadable</ref>($absolutePath))<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ae551a84ed0adacd38421a32b5bf74127" kindref="member">parseYamlFile</ref>($absolutePath);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ad28f01fd9ebb5f195bc47138775e9218" kindref="member">save</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$filePath,<sp/>$data,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$loggerChannel<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;default&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>$verbose<sp/>=<sp/>FALSE):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aabdb8b88439439884ba9fec3c62b7611" kindref="member">resetState</ref>($loggerChannel,<sp/>$verbose,<sp/></highlight><highlight class="stringliteral">&apos;save&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty($filePath))<sp/>{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_EMPTY_PATH,<sp/></highlight><highlight class="stringliteral">&apos;Empty<sp/>file<sp/>path<sp/>provided&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($this-&gt;isEmptyData($data))<sp/>{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_NO_DATA,<sp/></highlight><highlight class="stringliteral">&apos;No<sp/>data<sp/>provided&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref><sp/>=<sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a1763907a5d6908ffebea6188bb5cf7a7" kindref="member">prepareFilePath</ref>($filePath);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af175e2483264e2e3b3419118a2e4c714" kindref="member">checkFileExists</ref>($absolutePath)<sp/>||<sp/>!$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ab8600076d3c7882bac959d5c20712ca5" kindref="member">checkFileWritable</ref>($absolutePath))<sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_string($data))<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$data<sp/>=<sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ae0c59ac688a185daa6d7aad09fa0a4cf" kindref="member">normalizeYamlString</ref>($data);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/>$success<sp/>=<sp/>$this-&gt;yamlValidator-&gt;checkYaml($data);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/>$details<sp/>=<sp/>$this-&gt;yamlValidator-&gt;getResult();</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($success)<sp/>{</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$yaml<sp/>=<sp/>$details[</highlight><highlight class="stringliteral">&apos;yaml&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a083dd3cb7431e36c30b8600a9caa64e1" kindref="member">writeYamlFile</ref>($absolutePath,<sp/>$yaml);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>($details[</highlight><highlight class="stringliteral">&apos;error_code&apos;</highlight><highlight class="normal">],<sp/>$this-&gt;formatValidationError($details));</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aabdb8b88439439884ba9fec3c62b7611" kindref="member">resetState</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$loggerChannel,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>$verbose,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$stage):<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;info<sp/>=<sp/>[];</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;logger<sp/>=<sp/>$this-&gt;loggerFactory-&gt;get($loggerChannel);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;verbose<sp/>=<sp/>$verbose;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;stage<sp/>=<sp/>$stage;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a1763907a5d6908ffebea6188bb5cf7a7" kindref="member">prepareFilePath</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$filePath):<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($this-&gt;streamWrapperManagerHelper-&gt;getScheme($filePath))<sp/>{</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$filePath<sp/>=<sp/>$this-&gt;fileSystem-&gt;realpath($filePath);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref><sp/>=<sp/>file_exists($filePath)<sp/>?<sp/>$this-&gt;fileSystem-&gt;realpath($filePath)<sp/>:<sp/>$filePath;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;absolutePath<sp/>=<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;filename<sp/>=<sp/>$this-&gt;fileSystem-&gt;basename(<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af175e2483264e2e3b3419118a2e4c714" kindref="member">checkFileExists</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!file_exists(<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>))<sp/>{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_FILE_NOT_FOUND,<sp/></highlight><highlight class="stringliteral">&apos;File<sp/>%filename<sp/>not<sp/>found&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>TRUE;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a19cb354dde361968f6e655d5403ac5bf" kindref="member">checkFileReadable</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!is_readable(<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>))<sp/>{</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_FILE_NOT_READABLE,<sp/></highlight><highlight class="stringliteral">&apos;File<sp/>%filename<sp/>is<sp/>not<sp/>readable&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>TRUE;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ab8600076d3c7882bac959d5c20712ca5" kindref="member">checkFileWritable</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!is_writable(<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>))<sp/>{</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_FILE_NOT_WRITABLE,<sp/></highlight><highlight class="stringliteral">&apos;File<sp/>%filename<sp/>is<sp/>not<sp/>writable&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>TRUE;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ae551a84ed0adacd38421a32b5bf74127" kindref="member">parseYamlFile</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>):<sp/>array|</highlight><highlight class="keyword">false</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>$content<sp/>=<sp/>file_get_contents(<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($content<sp/>===<sp/>FALSE)<sp/>{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_READ_FAILED,<sp/></highlight><highlight class="stringliteral">&apos;The<sp/>file<sp/>%filename<sp/>could<sp/>not<sp/>be<sp/>read&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty(trim($content)))<sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_EMPTY_FILE,<sp/></highlight><highlight class="stringliteral">&apos;The<sp/>file<sp/>%filename<sp/>is<sp/>empty&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/>$content<sp/>=<sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ae0c59ac688a185daa6d7aad09fa0a4cf" kindref="member">normalizeYamlString</ref>($content);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af5c5d6be99982590c177a2cbb3655a20" kindref="member">checkYamlSyntax</ref>($content))<sp/>{</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;yamlValidator-&gt;getResult()[</highlight><highlight class="stringliteral">&apos;parsed&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1af5c5d6be99982590c177a2cbb3655a20" kindref="member">checkYamlSyntax</ref>($data):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(empty($data))<sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_NO_YAML_DATA,<sp/></highlight><highlight class="stringliteral">&apos;File<sp/>%filename<sp/>has<sp/>no<sp/>YAML<sp/>data&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/>$success<sp/>=<sp/>$this-&gt;yamlValidator-&gt;checkYaml($data);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$success)<sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$details<sp/>=<sp/>$this-&gt;yamlValidator-&gt;getResult();</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>($details[</highlight><highlight class="stringliteral">&apos;error_code&apos;</highlight><highlight class="normal">],<sp/>$this-&gt;formatValidationError($details));</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$details<sp/>=<sp/>$this-&gt;yamlValidator-&gt;getResult();</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;info<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;error_code&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;error_text&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;YAML<sp/>validation<sp/>passed.&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>TRUE;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a083dd3cb7431e36c30b8600a9caa64e1" kindref="member">writeYamlFile</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$yamlContent):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$this-&gt;fileSystem-&gt;saveData($yamlContent,<sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aeb04f80aab3c5b88ab7ceeef0f4e437d" kindref="member">$absolutePath</ref>,<sp/>FileSystemInterface::EXISTS_REPLACE);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($result<sp/>===<sp/>FALSE)<sp/>{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(self::ERROR_WRITE_FAILED,<sp/></highlight><highlight class="stringliteral">&apos;The<sp/>file<sp/>%filename<sp/>cannot<sp/>be<sp/>written.&apos;</highlight><highlight class="normal">,<sp/>[</highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename]);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;info<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;error_code&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;error_text&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/></highlight><highlight class="stringliteral">&apos;File<sp/>saved<sp/>successfully.&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>TRUE;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1aa056fbf507e5cd7c81a8636f3b3825fe" kindref="member">fail</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>$code,<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$message,<sp/>array<sp/>$context<sp/>=<sp/>[]):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>=<sp/>t($message,<sp/>$context);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;<ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a6d445b5884a8ea7b68fe606311481bff" kindref="member">sendLogError</ref>($message);</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;info<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;error_code&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$code,<sp/></highlight><highlight class="stringliteral">&apos;error_text&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$message];</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>FALSE;</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1a6d445b5884a8ea7b68fe606311481bff" kindref="member">sendLogError</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$message):<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($this-&gt;verbose)<sp/>{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$this-&gt;messenger-&gt;addError($message);</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($this-&gt;logger)<sp/>{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$this-&gt;logger-&gt;error($message<sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n\t&quot;</highlight><highlight class="normal"><sp/>.<sp/></highlight><highlight class="stringliteral">&apos;File:<sp/>&apos;</highlight><highlight class="normal"><sp/>.<sp/>$this-&gt;absolutePath);</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/>isEmptyData($data):<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$data<sp/>===<sp/>NULL<sp/>||</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$data<sp/>===<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"><sp/>||</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$data<sp/>===<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal"><sp/>||</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(is_array($data)<sp/>&amp;&amp;<sp/>empty($data))<sp/>||</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(is_string($data)<sp/>&amp;&amp;<sp/>trim($data)<sp/>===<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/><ref refid="classDrupal_1_1yaml__toolkit_1_1Service_1_1YamlStorage_1ae0c59ac688a185daa6d7aad09fa0a4cf" kindref="member">normalizeYamlString</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>$data):<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>str_replace([</highlight><highlight class="charliteral">&apos;\n&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;\r\n&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;\r&apos;</highlight><highlight class="normal">],<sp/>[</highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">],<sp/>$data);</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/>formatValidationError(array<sp/>$details):<sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>$stages<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;load&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Loading&apos;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&apos;save&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>t(</highlight><highlight class="stringliteral">&apos;Saving&apos;</highlight><highlight class="normal">)];</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>=<sp/>($details[</highlight><highlight class="stringliteral">&apos;error&apos;</highlight><highlight class="normal">]);</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>.=<sp/></highlight><highlight class="stringliteral">&quot;&lt;br&gt;&quot;</highlight><highlight class="normal"><sp/>.<sp/>t(</highlight><highlight class="stringliteral">&apos;@stage_action<sp/>the<sp/>file:<sp/>%filename&apos;</highlight><highlight class="normal">,<sp/>[</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;@stage_action&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$stages[$this-&gt;stage],</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;%filename&apos;</highlight><highlight class="normal"><sp/>=&gt;<sp/>$this-&gt;filename,</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>]);</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>$message<sp/>.=<sp/></highlight><highlight class="stringliteral">&quot;&lt;br&gt;&quot;</highlight><highlight class="normal"><sp/>.<sp/>$details[</highlight><highlight class="stringliteral">&apos;error_description&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>str_replace(</highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;&lt;br&gt;&quot;</highlight><highlight class="normal">,<sp/>$message);</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="src/Service/YamlStorage.php"/>
  </compounddef>
</doxygen>
